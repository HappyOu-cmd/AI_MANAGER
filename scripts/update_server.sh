#!/bin/bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –∫–æ–º–º–∏—Ç ‚Üí GitHub ‚Üí –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"

echo "üöÄ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: GitHub ‚Üí –°–µ—Ä–≤–µ—Ä"
echo "==========================================="
echo ""

cd "$PROJECT_DIR"

# –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ GitHub
echo "üì§ –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ GitHub..."
bash "$SCRIPT_DIR/push_to_github.sh"

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ GitHub. –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ."
    exit 1
fi

echo ""
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ 2 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º..."
sleep 2

# –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
echo ""
echo "üîÑ –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä..."
bash "$SCRIPT_DIR/deploy.sh"

echo ""
echo "‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω!"

